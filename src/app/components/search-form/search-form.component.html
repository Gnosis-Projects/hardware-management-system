<div class="position-relative">
  <div class="search-container">
    <form [formGroup]="searchForm" (ngSubmit)="onSubmit()">
      <h3 class="form-title">
        {{ searchType === 'computer' ? 
          'Αναζήτηση υπολογιστών' : 
          (searchType === 'phone' ? 
          'Αναζήτηση τηλεφωνικών συσκευών' : 
          (searchType === 'printer' ? 
          'Αναζήτηση εκτυπωτών' : 
          (searchType === 'network_equipment' ? 
          'Αναζήτηση δικτυακού εξοπλισμού' : 
          'Αναζήτηση σταθμών εργασίας'))) }}
      </h3>

      <!-- Common fields for all types -->
      <div class="row mb-3">
        <div class="col-md-12">
          <label for="aUnitId" class="form-label">{{'labels.aunit' | translate}} *</label>
          <select id="aUnitId" formControlName="aUnitId" class="form-select">
            <option [disabled]="aUnits.length === 1" value="null">{{'all' | translate }}</option>
            <option *ngFor="let aUnit of aUnits" [value]="aUnit.id">{{ aUnit.name }}</option>
          </select>
          <div *ngIf="searchForm.controls['aUnitId'].invalid && searchForm.controls['aUnitId'].touched">
            <p class="text-danger mt-1">{{'errorMessages.please.choose.aUnit' | translate}}</p>
          </div>
        </div>
      </div>

      <div *ngIf="searchType !== 'workstation'" formGroupName="filterDto">
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="deviceName" class="form-label">{{ 'labels.deviceName' | translate }}</label>
            <input id="deviceName" formControlName="deviceName" class="form-control" />
          </div>
          <div class="col-md-3">
            <label for="model" class="form-label">{{ 'labels.model' | translate }}</label>
            <input id="model" formControlName="model" class="form-control" />
          </div>
          <div class="col-md-3" *ngIf="searchType === 'computer' || searchType === 'phone' || searchType === 'printer' || searchType === 'network_equipment'">
            <label for="serialNumber" class="form-label">{{ 'labels.serialNumber' | translate }}</label>
            <input id="serialNumber" formControlName="serialNumber" class="form-control" />
          </div>
          <!-- Additional fields for computer -->
          <div class="col-md-3" *ngIf="searchType === 'computer'">
            <label for="ram" class="form-label">{{ 'labels.RAM' | translate }}</label>
            <input id="ram" type="number" formControlName="ram" class="form-control" />
          </div>
        </div>

        <!-- Network Equipment specific fields -->
        <div class="row mb-3" *ngIf="searchType === 'network_equipment'">
          <div class="col-md-3">
            <label for="networkEquipmentTypeId" class="form-label">{{ 'labels.netEquipmentType' | translate }}</label>
            <select id="networkEquipmentTypeId" formControlName="networkEquipmentTypeId" class="form-control">
              <option [value]="netEquipmentType.ROUTER">{{ 'Router' }}</option>
              <option [value]="netEquipmentType.SWITCH">{{ 'Switch' }}</option>
            </select>
          </div>

          <div class="col-md-3">
            <label for="ipAddress" class="form-label">{{ 'labels.ip' | translate }}</label>
            <input id="ipAddress" formControlName="ipAddress" class="form-control" />
          </div>

          <!-- Specific fields for routers -->
          <div class="col-md-3" *ngIf="searchForm.get('filterDto')?.get('networkEquipmentTypeId')?.value === netEquipmentType.ROUTER">
            <label for="routerUsername" class="form-label">{{ 'labels.routerUsername' | translate }}</label>
            <input id="routerUsername" formControlName="routerUsername" class="form-control" />
          </div>
          <div class="col-md-3" *ngIf="searchForm.get('filterDto')?.get('networkEquipmentTypeId')?.value === netEquipmentType.ROUTER">
            <label for="routerPassword" class="form-label">{{ 'labels.routerPassword' | translate }}</label>
            <input id="routerPassword" formControlName="routerPassword" class="form-control" />
          </div>

          <!-- Specific fields for switches -->
          <div class="col-md-3" *ngIf="searchForm.get('filterDto')?.get('networkEquipmentTypeId')?.value === netEquipmentType.SWITCH">
            <label for="switchAddress" class="form-label">{{ 'labels.switchAddress' | translate }}</label>
            <input id="switchAddress" formControlName="switchAddress" class="form-control" />
          </div>
        </div>
      </div>

      <div *ngIf="searchType === 'workstation'" formGroupName="workstationFilterDto">
        <div class="row mb-3">
          <div class="col-md-4">
            <label for="employeeLastName" class="form-label">{{ 'employeeLastName' | translate }}</label>
            <input id="employeeLastName" formControlName="employeeLastName" class="form-control" />
          </div>
          <div class="col-md-4">
            <label for="employeeFirstName" class="form-label">{{ 'employeeFirstName' | translate }}</label>
            <input id="employeeFirstName" formControlName="employeeFirstName" class="form-control" />
          </div>
          <div class="col-md-4">
            <label for="department" class="form-label">{{ 'department' | translate }}</label>
            <input id="department" formControlName="department" class="form-control" />
          </div>
        </div>
      </div>

      <div formGroupName="sorting">
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="sortBy" class="form-label">{{ 'labels.sortBy' | translate }}</label>
            <select id="sortBy" formControlName="sortBy" class="form-select">
              <option [value]="'deviceName'">{{ sorting.DEVICE_NAME }}</option>
              <option [value]="'Date'">{{ sorting.DATE }}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="sortOrder" class="form-label">{{ 'labels.sortOrder' | translate }}</label>
            <select id="sortOrder" formControlName="sortOrder" class="form-select">
              <option [value]="'desc'">{{ sorting.DESC }}</option>
              <option [value]="'asc'">{{ sorting.ASC }}</option>
            </select>
          </div>
        </div>
      </div>

      <button type="submit" [disabled]="searchForm.controls['aUnitId'].invalid" class="btn btn-primary btn-search">Αναζήτηση</button>
    </form>
    <button mat-mini-fab color="warn" class="position-absolute top-0 end-0 m-2" (click)="close.emit()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</div>
